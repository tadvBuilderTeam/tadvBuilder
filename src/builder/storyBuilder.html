<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Choose Your Own Adventure</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<div id="intro" class="intro sectionHighlighted">
    <h1>Choose Your Own Adventure</h1>
    <h2>Ein Tool zum Schreiben verzweigter Entscheidungsgeschichten direkt im Browser</h2>
    <p>Dieses Tool hilft dir beim Erstellen von verzweigten Erlebnissen: sogenannte "Entscheidungsgeschichten".
        Leserinnen und Leser können durch ihre Entscheidungen den Verlauf beeinflussen. Jede Szene bekommt einen eindeutigen Schlüsselnamen,
        einen Text und eine oder mehrere Auswahlmöglichkeiten, die zu anderen Szenen führen. Du kannst Szenen anlegen, verknüpfen,
        Vorschauen anzeigen lassen und am Ende das komplette Story-Konstrukt als JSON weiterverwenden oder speichern - alles direkt im Browser, komplett offline und lokal.</p>
    <p>Design-Theme:</p>
    <label for="theme-select"></label><select id="theme-select">
        <option value="default">Standard</option>
        <option value="warm">Warm Neutral</option>
    </select>
</div>

<div id="tree-html-section" class="section">
    <h2>Entscheidungsbaum (HTML-Ansicht)</h2>
    <button id="btn-html-tree-refresh">HTML-Baum aktualisieren</button>
    <div id="tree-html-area"></div>
    <!-- After each rendering, all content gets replaced. -->
</div>

<div class="content" style="text-align: center; margin-top: 50px;">
    <p>Mit dem Szeneneditor lassen sich Szenen erstellen, oder Szeneninhalte ändern. </p>
    <button id="showCreatorBtn">Neue Szene</button>
    <button id="showEditorBtn">Szene ändern</button>
</div>

<div class="popup" id="create-scene-popup">
    <div class="popup-content">
        <span class="close" id="creator-closeBtn">&times;</span>
        <div id="scene-creator" class="section">
            <h2>Szene anlegen:</h2>
            <label>Schlüsselname der Szene:<span class="help">Ein eindeutiger Bezeichner, z. B. <code>start</code> oder <code>kapitel1</code></span></label>
            <label for="creator-scene-key"></label><input type="text" id="creator-scene-key" placeholder="z. B. start">

            <label>Text der Szene:<span class="help">Der eigentliche Erzähltext, der dem Leser angezeigt wird</span></label>
            <label for="creator-scene-text"></label><textarea id="creator-scene-text" rows="4" placeholder="Hier deine Szene eingeben..."></textarea>

            <label>Entscheidungen:<span class="help">Welche Möglichkeiten der Leser hat und wohin sie führen</span></label>
            <div id="creator-choices-container">
                <div class="choice-inputs">
                    <input type="text" class="choice-text" placeholder="Entscheidungstext">
                    <input type="text" class="choice-next" placeholder="Nächste Szene (Schlüssel)">
                </div>
            </div>
            <button id="creator-add-choice-btn">Weitere Entscheidung hinzufügen</button>
            <button id="creator-submit-btn">Szene speichern</button>
            <pre id="creator-scene-status">(noch keine Aktion durchgeführt)</pre>
        </div>
    </div>
</div>

<div class="popup" id="edit-scene-popup">
    <div class="popup-content">
        <span class="close" id="editor-closeBtn">&times;</span>
        <div id="scene-editor" class="section">
            <h2>Szene bearbeiten:</h2>
            <label>Schlüsselname der Szene:<span class="help">Ein eindeutiger Bezeichner, z. B. <code>start</code> oder <code>kapitel1</code></span></label>
            <label for="editor-scene-key"></label><input type="text" id="editor-scene-key" placeholder="z. B. start">

            <label>Text der Szene:<span class="help">Der eigentliche Erzähltext, der dem Leser angezeigt wird</span></label>
            <label for="editor-scene-text"></label><textarea id="editor-scene-text" rows="4" placeholder="Hier deine Szene eingeben..."></textarea>

            <label>Entscheidungen:<span class="help">Welche Möglichkeiten der Leser hat und wohin sie führen</span></label>
            <div id="editor-choices-container"></div>
            <button id="editor-add-choice-btn">Weitere Entscheidung hinzufügen</button>
            <button id="editor-submit-btn">Szene speichern</button>
            <pre id="editor-scene-status">(noch keine Aktion durchgeführt)</pre>
        </div>
    </div>
</div>

<div id="play-section" class="section">
    <h2>Interaktive Vorschau</h2>
    <p class="help">Die Geschichte wird ab der Szene mit dem Schlüssel <code>start</code> gestartet</p>
    <button id="start-story">Geschichte starten</button>
    <div id="play-area"></div>
</div>

<div id="tree-section" class="section">
    <h2>Entscheidungsbaum (ASCII-Übersicht)</h2>
    <p class="help">Diese einfache Textdarstellung zeigt, welche Szene zu welcher führt. Sie wird automatisch aus deinem Story-Aufbau generiert.</p>
    <pre id="tree-output">(noch kein Baum erstellt)</pre>
    <button id="btn-ascii-tree-refresh">Entscheidungsbaum aktualisieren</button>
</div>

<div id="import-export-section" class="section">
    <h2><span class="emoji"></span> Geschichte importieren / exportieren</h2>
    <p class="help">Lade eine bestehende Geschichte (JSON) oder exportiere deine aktuelle Arbeit.</p>

    <label for="json-file">JSON-Datei laden:</label>
    <input type="file" id="json-file" accept=".json" />
    <button id="import-json">Importieren von JSON</button>
    <button id="export-json">Exportieren als JSON</button>
    <button id="export-html">Exportieren als HTML</button>

    <div class="checkbox-container">
        <input type="checkbox" id="export-antiscraping-check">
        <label for="export-antiscraping-check">Kopierschutz</label>
    </div>
    <br>Kopierschutz dient hauptsächlich gegen Webscraper. Nur bei export als html möglich.

    <pre id="import-status">(kein Import durchgeführt)</pre>
</div>

<script src="main.js" type="module"></script>
</body>